# Kit 工作流 (自动化版)

轻量级规范驱动开发工作流，支持 Cursor Commands 自动流转。

---

## 📁 目录结构

```
.cursor/commands/kit/
├── spec.md              # 需求规范 (入口)
├── plan/
│   ├── plan.md          # 实现计划
│   └── research.md      # 技术研究
├── task/
│   ├── task.md          # 任务执行
│   └── rules.md         # 执行规范
├── check/
│   └── check.md         # 检查验收
├── history/             # 历史文档归档
├── rules/               # 项目规则
│   ├── regular.mdc      # 通用规范（始终应用）
│   ├── clean-code.mdc
│   └── react.mdc
└── scripts/
    └── check-prerequisites.sh
```

---

## 🔄 工作流程

```
┌─────────┐    自动     ┌─────────┐    确认     ┌─────────┐    自动     ┌─────────┐
│  spec   │ ────────▶  │  plan   │ ────────▶  │  task   │ ────────▶  │  check  │
│ (理解)  │            │ (计划)  │   询问      │ (执行)  │            │ (验收)  │
└─────────┘            └─────────┘            └─────────┘            └─────────┘
                                                                          │
                                                                          ▼
                                                                    ┌─────────┐
                                                                    │ history │
                                                                    │ (归档)  │
                                                                    └─────────┘
```

### 流转规则

| 阶段 | 流转方式 | 说明 |
|------|----------|------|
| spec → plan | ⚡ 自动 | 需求理解完成后自动进入计划阶段 |
| plan → task | 🔄 询问确认 | 方案确定后需用户确认才执行 |
| task → check | 🔄 询问确认 | 任务完成后需用户确认才进入检查 |
| check → history | ⚡ 自动 | 有文档则增量更新，无则自动新建 |

---

## 🚀 快速开始

```bash
# 在 Cursor 中执行命令
/kit.spec [你的需求描述]
```

---

## 📋 各阶段说明

### 1. Spec (需求规范)

- 理解需求背景
- 分析项目上下文
- 查阅历史文档
- 明确改动边界

### 2. Plan (实现计划)

- 确认技术方案
- 定位代码位置
- 拆分执行步骤
- 评估风险

### 3. Task (任务执行)

- 按步骤执行代码修改
- 遵循项目规范 (rules/)
- 追踪执行进度

### 4. Check (检查验收)

- 需求检查（4项）
- 技术检查（5项）
- AI代码审查（5项）
- 交付检查（3项）
- 自动更新 History 文档

---

## 📚 History 文档策略

| 情况 | 处理方式 |
|------|----------|
| 有相关文档 | 📝 **增量更新** - 追加新记录，保留原有内容 |
| 无相关文档 | 📄 **自动新建** - 创建新文档记录 |

**增量更新规则**：
- 尽量保留原有内容，优先在原有基础上修改
- 按需新增内容
- 核心流程图如有必要可以更新
- 绝对不完全覆盖/完全移除已有内容

---

## ⚙️ 特点

- ✅ **自动化**: Cursor Commands 自动流转
- ✅ **可控**: 关键节点（plan 确认）需用户确认
- ✅ **规范**: 集成项目代码规范 + AI 代码审查
- ✅ **归档**: 自动增量维护历史文档
