ç¼–å†™æµç¨‹å›¾

æ¨¡ç‰ˆaï¼Œ ç”¨æˆ·ä¸»åŠ¨æ“ä½œä¹‹åè§¦å‘æ•°æ®å’ŒUIå˜åŒ–çš„æµç¨‹å›¾
```
ç”¨æˆ·åœ¨ Value Chain ä¸Šé€‰æ‹© MAG7.ssi æˆ– sMAG7.ssiï¼Œç‚¹å‡» "Deposit"
    â†“
dispatch({ type: 'START' })
    â†“
[çŠ¶æ€æœºæ£€æŸ¥] config.needsBaseChain = false
    â†“
reducer è¿”å›: { type: 'value_chain_phase' }  â† ğŸ”‘ ç›´æ¥è¿›å…¥ Vault é˜¶æ®µ
    â†“
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Phase 1: Vault Deposit                                   â•‘
â•‘  UI: "Depositing to SLP Vault"                            â•‘
â•‘  Warning: è¿›å…¥ Vault æµç¨‹å³æç¤º EVM-Funding                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    â†“
useEffect æ‰§è¡Œ case 'value_chain_phase':
    â”œâ”€ onPhaseChangeRef.current('vault')  â† UI: "Depositing to SLP Vault"
    â””â”€ valueChainDepositRef.current.execute()
        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Value Chain å­çŠ¶æ€æœºæµç¨‹:         â”‚
    â”‚  1. transfer (å¦‚éœ€è¦)             â”‚
    â”‚     - ä» Spot/Perps è½¬åˆ° EVM     â”‚
    â”‚  2. stake (å¦‚éœ€è¦)                â”‚
    â”‚     - MAG7 â†’ sMAG7: éœ€è¦         â”‚
    â”‚     - sMAG7: è·³è¿‡                â”‚
    â”‚  3. approve (EIP-2612 Permit)    â”‚
    â”‚  4. confirm (ç­¾å)                â”‚
    â”‚  5. confirm (é“¾ä¸Šæ‰§è¡Œ)            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
    âœ… å®Œæˆ
```

æ¨¡ç‰ˆbï¼Œæ•°æ®æ¥æºï¼Œä¾èµ–ä»¥åŠè¿‡æ»¤çš„æµç¨‹å›¾
```
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æ“ä½œå±‚                             â”‚
â”‚  è¿æ¥é’±åŒ…  â”‚  åˆ‡æ¢è´¦å·  â”‚  ç™»å‡º  â”‚  å­˜æ¬¾/å–æ¬¾äº¤æ˜“  â”‚  åˆ·æ–°é¡µé¢  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚          â”‚        â”‚           â”‚              â”‚
       â†“          â†“        â†“           â†“              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é’±åŒ…åœ°å€å±‚                               â”‚
â”‚           useWalletAddress (ç›‘å¬é’±åŒ…çŠ¶æ€)                     â”‚
â”‚                 address / null                               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â†“                                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   user.address     â”‚              â”‚  useProxyAddress      â”‚
â”‚   (MobX Store)     â”‚              â”‚  (React Hook)         â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                   â”‚
      â”‚ reaction                          â”‚ useEffect
      â†“                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  vault.ts          â”‚              â”‚  proxyAddress         â”‚
â”‚  - mag7Balance     â”‚              â”‚  (Base Chain æŸ¥è¯¢)    â”‚
â”‚  - depositTx       â”‚              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
      â”‚                                   â”‚ useEffect
      â”‚ reaction                          â†“
      â†“                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  useCooldownInfos     â”‚
â”‚  chainAsset        â”‚           â”‚  - cooldownInfo       â”‚
â”‚  - mergedBalances  â”‚           â”‚  - formattedInfo*     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â†“
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚ decimals readiness?   â”‚
                                  â”‚ (mag7 decimals > 0)   â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚ yes
                                            â†“
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚ formattedInfo è¾“å‡º    â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â†“
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚    SLP.tsx (UI)       â”‚
                                    â”‚  - StatusBar æ˜¾ç¤º     â”‚
                                    â”‚  - äº¤äº’æŒ‰é’®           â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

æ¨¡ç‰ˆc, ä»æ•°æ®è·å–åˆ°uiæ˜¾ç¤ºçš„æµç¨‹å›¾
```
é¡µé¢åŠ è½½ / åˆ‡æ¢äº¤æ˜“å¯¹
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤ 1: spotTicker.fetchCurrentSymbolTicker()          â”‚
â”‚ (spotTicker.ts Line 295-311)                          â”‚
â”‚                                                        â”‚
â”‚ async fetchCurrentSymbolTicker(params: { symbol }) {  â”‚
â”‚   const { symbol } = params;                          â”‚
â”‚                                                        â”‚
â”‚   if (!symbol) return;                                â”‚
â”‚                                                        â”‚
â”‚   const result = await request(                       â”‚
â”‚     API.SPOT_TICKER_CURRENT_SYMBOL,                   â”‚
â”‚     {                                                 â”‚
â”‚       params: { symbol }                              â”‚
â”‚     }                                                 â”‚
â”‚   ).then(res => res.data);                            â”‚
â”‚                                                        â”‚
â”‚   if (result) {                                       â”‚
â”‚     this.setCurrentSymbolTicker(result);              â”‚
â”‚   } else {                                            â”‚
â”‚     this.setCurrentSymbolTicker(defaultTickerInfo);   â”‚
â”‚   }                                                   â”‚
â”‚ }                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤ 2: API è¯·æ±‚                                        â”‚
â”‚                                                        â”‚
â”‚ GET /api/ticker/current                               â”‚
â”‚ ?symbol=vBTC_vUSDC                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤ 3: æœåŠ¡å™¨è¿”å›æ•°æ®                                   â”‚
â”‚                                                        â”‚
â”‚ {                                                      â”‚
â”‚   s: "vBTC_vUSDC",                                    â”‚
â”‚   c: "96800",      // æœ€æ–°ä»·                           â”‚
â”‚   h: "98000",      // æœ€é«˜ä»·                           â”‚
â”‚   l: "95000",      // æœ€ä½ä»·                           â”‚
â”‚   o: "96500",      // å¼€ç›˜ä»·                           â”‚
â”‚   v: "123456",     // æˆäº¤é‡                           â”‚
â”‚   a: "100000",     // æˆäº¤é¢                           â”‚
â”‚   r: "0.0031",     // æ¶¨è·Œå¹…                           â”‚
â”‚   t: 1699999999    // æ—¶é—´æˆ³                           â”‚
â”‚ }                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤ 4: spotTicker.setCurrentSymbolTicker(data)       â”‚
â”‚ (spotTicker.ts Line 290-292)                          â”‚
â”‚                                                        â”‚
â”‚ @action.bound                                         â”‚
â”‚ setCurrentSymbolTicker(data: Datum) {                 â”‚
â”‚   this.currentSymbolTicker = data;                    â”‚
â”‚ }                                                     â”‚
â”‚                                                        â”‚
â”‚ ç»“æœ: currentSymbolTicker.c = "96800"                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤ 5: spot.latestPrice è‡ªåŠ¨é‡æ–°è®¡ç®—                   â”‚
â”‚ (spot.ts Line 1257-1270)                              â”‚
â”‚                                                        â”‚
â”‚ @computed get latestPrice() {                         â”‚
â”‚   return this.rootStore.spotTicker                    â”‚
â”‚     .currentSymbolTicker.c;  // "96800"              â”‚
â”‚ }                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤ 6: UI è‡ªåŠ¨æ›´æ–°                                     â”‚
â”‚                                                        â”‚
â”‚ const { latestPrice } = spot;  // "96800"             â”‚
â”‚                                                        â”‚
â”‚ // ä»·æ ¼æ˜¾ç¤ºã€æŒ‰é’®çŠ¶æ€ç­‰è‡ªåŠ¨å“åº”æ›´æ–°                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

